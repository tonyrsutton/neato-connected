- vacuum:
    - name: Template Neato Vacuum
      unique_id: template_neato_vacuum
      state: "{% set robot_id = 'neato_vacuum' %}
        {% set ui_state = states('sensor.' ~ robot_id ~ '_ui_state') %}
        {% set error_state = states('sensor.' ~ robot_id ~ '_robot_error') %}
        {% if is_state('binary_sensor.neato_1_ext_power_present', 'on') %}
            docked
        {% elif 'STATE_IDLE' or 'STATE_STANDBY' in ui_state %}
            idle
        {% elif 'RUNNING' or 'STATE_START' in ui_state %}
            cleaning
        {% elif 'PAUSED' in ui_state %}
            paused
        {% elif 'DOCKINGRUNNING' in ui_state %}
            returning
        {% else %}
            error
        {% endif %}"
      attributes:
        alert: "{{ states('sensor.neato_vaccum_robot_alert') }}"
        error: "{{ states('sensor.neato_vacuum_robot_error') }}"
      start:
        service: button.press
        target:
          entity_id: button.neato_vacuum_house_clean
      clean_spot:
        service: button.press
        target:
          entity_id: button.neato_vacuum_spot_clean
      pause:
        service: button.press
        target:
          entity_id: button.neato_vacuum_pause_cleaning
      stop:
        service: button.press
        target:
          entity_id: button.neato_vacuum_stop_cleaning
      return_to_base:
        service: button.press
        target:
          entity_id: button.neato_vacuum_send_to_base
      locate:
        service: button.press
        target:
          entity_id: button.neato_vacuum_locate_robot